import socks
import socket
import http.client
import ssl
from faker import Faker


proxy_host = '191.101.80.124'  # IP-адрес прокси-сервера
proxy_port = 9050  # Порт прокси-сервера (обычно 9050 для Tor)


socks.set_default_proxy(socks.SOCKS5, proxy_host, proxy_port)
socket.socket = socks.socksocket

url = input('Url: ')

parsed_url = http.client.urlsplit(url)
host = parsed_url.netloc
path = parsed_url.path if parsed_url.path else '/'


context = ssl.create_default_context()
with socket.create_connection((host, 80)) as sock:
    with context.wrap_socket(sock, server_hostname=host) as ssock:
        # Генерируем фальшивый User-Agent и IP-адрес
        fake = Faker()
        user_agent = fake.user_agent()
        ip_addr = fake.ipv4()


        headers = {
            "User-Agent": user_agent,
            "Remote-Address": ip_addr
        }


        request = f"GET {path} HTTP/1.1\r\nHost: {host}\r\n"
        for key, value in headers.items():
            request += f"{key}: {value}\r\n"
        request += "\r\n"

        ssock.sendall(request.encode())
        response = ssock.recv(4096)

print(response.decode())