from logos.start import logo_start, logo , functions_, rnaoddd
from files.exceptions import Sys_not, Typeserror
from modules.functions import parsing, nmap, ddos_attack, scanner
from colorama import init, Fore, Back 
from system.main_metaspl import copy_page
from sql_data.base import base_func

init()


import time , os


print(logo_start) 
time.sleep(2) 
print(rnaoddd) 


def main(): 
    """Menu exploit"""   
    def check_db():  
        global file_name, file_path
        file_name = "data.db"
        file_path = os.path.join("./Dexploit", file_name)  # Получаем полный путь к файлу
        return os.path.isfile(file_path)  
    if check_db(): 
                main() 
    else: 
                bd = input("[*] Do you want to create target database[y/n]?:") 

                if bd == "y": 
                     base_func() 
                else: 
                     main()
    try: 
        msf = input(Fore.CYAN+"exploit> ")
        while True:  
            
            
        

            if msf == "use nmap":  
                url_nmape = input(Fore.BLUE+"[*} Address:") 
                port_n  = input(Fore.BLUE+"[*} PORT: ") 
                nmap(url_nmape, port=port_n)  

                try: 
                    print(Fore.GREEN+"Success") 
                    main()

                except Exception:  
                    print(Fore.RED+"None work")
                    main()

            elif msf == "use tools/DDOS":
                 url_ = input(Fore.BLUE+"[*} URL: ")   
                 ddos_attack(url=url_)

            elif msf == "use pagecopy": 
                 url_copy = input(Fore.BLUE + "[*} URL: ")  
                 copy_page(url_copy).seleniumpage()

                 try: 
                    
                    print("Success")  
                    main()

                 except Exception as e: 
                    print(e) 
                    main()
                     
            elif msf == "use scaner": 
                url_scan = input(Fore.BLUE + "[*} URL: ") 
                scan_catalog = input(Fore.BLUE+"[*} Directory: ")
                scanner(url=url_scan, directory=scan_catalog) 

                try: 
                    
                    print("Success")  
                    main()

                except Exception as e: 
                    print(e) 
                    main()
           

            elif msf == "use exploit/parsing":  
                global url_parsing, port_parsing
                url_parsing = input(Fore.BLUE+"[*} URL: ") 
                port_parsing = input(Fore.BLUE+"[*} PORT: ")  
                parsing(url_parsing, port=port_parsing)   
                
                try:
                   #print(res)
                   print(Fore.GREEN+"Success parsing") 
                   main() 
                except: 
                    print(Fore.RED+"None work")
                    main() 


            elif msf == "info": 
                info = f"""
                Welcome to python developer Difficult. 
                You have launched EXPOLOIT pentest app  

                Exploit instruments: 
                {functions_}
                """ 
                print(info) 
                main()
            else: 
                 main()

    except Sys_not and Typeserror as e: 
        return e


